CREATE TABLE UBICACION_EVENTO (
  ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  VEHICULO_ID VARCHAR2(50) NOT NULL,
  LAT NUMBER(10,6) NOT NULL,
  LNG NUMBER(10,6) NOT NULL,
  TS_EVENTO TIMESTAMP NOT NULL,
  CREADO_EN TIMESTAMP DEFAULT SYSTIMESTAMP
);

CREATE TABLE HORARIO_EVENTO (
  ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  VEHICULO_ID VARCHAR2(50) NOT NULL,
  PARADERO VARCHAR2(50) NOT NULL,
  ETA_MIN NUMBER(5) NOT NULL,
  TS_EVENTO TIMESTAMP NOT NULL,
  CREADO_EN TIMESTAMP DEFAULT SYSTIMESTAMP
);

CREATE TABLE RESUMEN_DIA (
  ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  FECHA DATE NOT NULL,
  VEHICULO_ID VARCHAR2(50) NOT NULL,
  TOTAL_UBICACIONES NUMBER(10) NOT NULL,
  TOTAL_HORARIOS NUMBER(10) NOT NULL,
  PRIMER_EVENTO TIMESTAMP,
  ULTIMO_EVENTO TIMESTAMP,
  PARADEROS_VISITADOS CLOB,
  CREADO_EN TIMESTAMP DEFAULT SYSTIMESTAMP
);

CREATE INDEX IDX_UBI_VEH_TS ON UBICACION_EVENTO (VEHICULO_ID, TS_EVENTO);
CREATE INDEX IDX_HOR_VEH_TS ON HORARIO_EVENTO (VEHICULO_ID, TS_EVENTO);
CREATE INDEX IDX_RES_VEH_FEC ON RESUMEN_DIA (VEHICULO_ID, FECHA);
